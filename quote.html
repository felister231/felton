<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FelTon Movers Quote</title>
  <link rel="stylesheet" href="css/quote.css" />

  <!-- jsPDF for PDF download -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    .modal-content { max-width: 800px; width: 95%; }
    #map { width: 100%; height: 400px; }
    #pac-input { width: 100%; box-sizing: border-box; }
    .confirm-btn { margin-top: 10px; background:#007bff; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo"><a href="index.html">FelTon</a></div>
    <div class="menu-toggle" id="menu-toggle">&#9776;</div>
    <ul class="nav-links" id="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="blog.html">Blog</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="gallery.html">Gallery</a></li>
      <li><a href="quote.html">Quote</a></li>
    </ul>
  </nav>

  <div class="container">
    <h1>FelTon Movers Quote Form</h1>

    <form id="quoteForm">
      <input type="text" id="fullname" placeholder="Your Name" required />
      <input type="tel" id="phone" placeholder="Phone Number" required />
      <input type="email" id="email" placeholder="Email Address" required />

      <div class="location-group">
        <input type="text" id="from" placeholder="Moving From" required readonly />
        <button type="button" onclick="openMap('from')">Pick from Map</button>
      </div>

      <div class="location-group">
        <input type="text" id="to" placeholder="Moving To" required readonly />
        <button type="button" onclick="openMap('to')">Pick from Map</button>
      </div>

      <select id="houseType" required>
        <option value="">Select House Type</option>
        <option value="Bedsitter">Bedsitter</option>
        <option value="1 Bedroom">1 Bedroom</option>
        <option value="2 Bedroom">2 Bedroom</option>
        <option value="3 Bedroom">3 Bedroom</option>
        <option value="More than 3 Bedrooms">More than 3 Bedrooms</option>
      </select>

      <button type="submit">Calculate Quote</button>
    </form>
    <div id="loader" style="display:none">Calculating...</div>
<div id="priceDisplay"></div>

<!-- Hidden fields for WhatsApp sharing -->
<p id="distance" style="display:none;"></p>
<p id="totalCost" style="display:none;"></p>

<button id="downloadPDF" style="display:none">Download PDF</button>


   
    <div id="manualDistanceSection" style="display:none; margin-top: 12px;">
      <h3>Couldn't detect distance?</h3>
      <p>Enter the distance in kilometers manually:</p>
      <input type="number" id="manualDistanceInput" placeholder="Enter distance in km" min="1" />
      <button id="manualCalcBtn">Calculate Quote Manually</button>
    </div>

    <button onclick="sendQuoteToWhatsApp()" id="whatsappShare" style="display:none;" class="btn">
      ğŸ“¤ Share Quote on WhatsApp
    </button>
  </div>

  <!-- Map Modal -->
  <div id="mapModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeMap()">&times;</span>
      <h2>Select Location on Map</h2>
      <input id="pac-input" class="controls" type="text" placeholder="Search location..." />
      <div id="map"></div>

      <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:8px;">
        <button class="confirm-btn" onclick="confirmLocation()">Confirm Location</button>
        <button class="confirm-btn" style="background:#6c757d" onclick="closeMap()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Google Maps API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAuFIJBoiezeu0jTmz3ljEQe_hZ4K4x2bU&libraries=places" async defer></script>


  <!-- WhatsApp Share Function -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const whatsappButton = document.getElementById("whatsappShare");

  whatsappButton.addEventListener("click", () => {
    const fullname = document.getElementById("fullname")?.value || "Valued Customer";
    const phone = document.getElementById("phone")?.value || "Not provided";
    const from = document.getElementById("from")?.value || "Not set";
    const to = document.getElementById("to")?.value || "Not set";
    const houseType = document.getElementById("houseType")?.value || "Not selected";
    const distance = document.getElementById("distance")?.textContent || "Auto-calculated";
    const totalCost = document.getElementById("totalCost")?.textContent || "Pending";

    const today = new Date().toLocaleDateString("en-KE", {
      year: "numeric",
      month: "long",
      day: "numeric"
    });

    const companyName = "FelTon Movers ğŸš›";
    const tagline = "Swift â€¢ Secure â€¢ Stress-Free Moves ğŸ’ª";
    const logoUrl = "https://feltonmovers.co.ke/images/logo.png";
    const stampUrl = "https://feltonmovers.co.ke/images/stamp.png";
    const phoneNumber = "+254111300121";

    const message = `
*${companyName}*
${tagline}

ğŸ§¾ *Official Moving Quote*
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ‘¤ *Customer:* ${fullname}
ğŸ“… *Date:* ${today}
ğŸ“ *From:* ${from}
ğŸ *To:* ${to}
ğŸ  *House Type:* ${houseType}
ğŸ“ *Distance:* ${distance}
ğŸ’° *Estimated Cost:* ${totalCost}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… *Note:* Includes professional movers, transport & handling.

ğŸ“ *Contact Us*
${phoneNumber}
ğŸ“§ info@feltonmovers.co.ke
ğŸŒ www.feltonmovers.co.ke

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
*FelTon Movers â€” We Move, You Relax.* ğŸ’«

ğŸ·ï¸ *Official Branding:*
Logo: ${logoUrl}
Stamp: ${stampUrl}
`;

    const encoded = encodeURIComponent(message);
    window.open(`https://wa.me/?text=${encoded}`, "_blank");
  });
});
</script>
<script src="quote.js"></script>

</body>
</html>
